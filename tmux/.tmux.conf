# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                    TMUX CONFIG â€” Memo                       â•‘
# â•‘              Catppuccin Mocha + Powerline Style             â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ğŸ¨  Color Palette (Catppuccin Mocha)
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
#   base      = #1e1e2e    surface0  = #313244
#   surface1  = #45475a    overlay0  = #6c7086
#   text      = #cdd6f4    subtext0  = #a6adc8
#   lavender  = #b4befe    blue      = #89b4fa
#   sapphire  = #74c7ec    teal      = #94e2d5
#   green     = #a6e3a1    yellow    = #f9e2af
#   peach     = #fab387    mauve     = #cba6f7
#   red       = #f38ba8    rosewater = #f5e0dc

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# âš™ï¸  General Settings
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"     # True color support
setw -g xterm-keys on
set -s escape-time 0                                  # Instant escape (critical for nvim)
set -sg repeat-time 600
set -g history-limit 50000                            # Generous scrollback
set -g focus-events on                                # For nvim autoread
set -g set-clipboard on                               # OSC 52 clipboard

# Prefix â€” Ctrl+Space (mÃ¡s ergonÃ³mico que Ctrl+b)
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ğŸ–±ï¸  Mouse
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
set -g mouse on
bind m set -g mouse off \; display " Mouse OFF"
bind M set -g mouse on  \; display " Mouse ON"

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ğŸªŸ  Windows & Panes
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
set -g base-index 1
setw -g pane-base-index 1
setw -g automatic-rename on
set -g renumber-windows on

# Splits intuitivos (abren en el mismo directorio)
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"
unbind '"'
unbind %

# NavegaciÃ³n de paneles (vim-style)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Smart pane switching con awareness de vim (si usas vim-tmux-navigator)
is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
    | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|l?n?vim?x?|fzf)(diff)?$'"
bind-key -n 'C-h' if-shell "$is_vim" 'send-keys C-h'  'select-pane -L'
bind-key -n 'C-j' if-shell "$is_vim" 'send-keys C-j'  'select-pane -D'
bind-key -n 'C-k' if-shell "$is_vim" 'send-keys C-k'  'select-pane -U'
bind-key -n 'C-l' if-shell "$is_vim" 'send-keys C-l'  'select-pane -R'

# Clear CLI
bind C-l send-keys "clear" Enter

# Resize de paneles (con repeat)
bind -r H resize-pane -L 3
bind -r J resize-pane -D 3
bind -r K resize-pane -U 3
bind -r L resize-pane -R 3

# Maximize/restore pane con <prefix> z (ya es default pero lo menciono)
# Swap panes
bind > swap-pane -D
bind < swap-pane -U

# Nueva sesiÃ³n
bind-key C new-session

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ğŸ“‹  Copy Mode (vi-style)
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
setw -g mode-keys vi

bind Enter copy-mode                                 # Enter copy mode
bind -T copy-mode-vi v   send -X begin-selection
bind -T copy-mode-vi C-v send -X rectangle-toggle    # Block selection
bind -T copy-mode-vi y   send -X copy-selection-and-cancel
bind -T copy-mode-vi Escape send -X cancel

# Clipboard integration (WSL)
# Si estÃ¡s en WSL, cambia pbcopy por clip.exe o win32yank
if-shell 'test -n "$WSL_DISTRO_NAME"' \
  'bind -T copy-mode-vi y send -X copy-pipe-and-cancel "clip.exe"' \
  'bind -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"'

bind p paste-buffer
bind P choose-buffer
bind b list-buffers

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ğŸ¨  STATUS BAR â€” Catppuccin Mocha Powerline
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
set -g status on
set -g status-interval 2
set -g status-position bottom
set -g status-justify left
set -g status-style "fg=#cdd6f4,bg=#1e1e2e"

set -g status-left-length 40
set -g status-right-length 150

# â”Œâ”€ Left: Session name with powerline arrow
set -g status-left "\
#[fg=#1e1e2e,bg=#b4befe,bold]  #S \
#[fg=#b4befe,bg=#313244,nobold]\
#[fg=#cdd6f4,bg=#313244] #{?client_prefix,#[fg=#fab387] PREFIX,} \
#[fg=#313244,bg=#1e1e2e]"

# â”Œâ”€ Right: Git branch + Date + Time + Host
set -g status-right "\
#[fg=#313244,bg=#1e1e2e]\
#[fg=#94e2d5,bg=#313244]  #(cd #{pane_current_path}; git branch --show-current 2>/dev/null || echo 'â€”') \
#[fg=#45475a,bg=#313244]â”‚\
#[fg=#f9e2af,bg=#313244] ó°ƒ° %b %d \
#[fg=#45475a,bg=#313244]â”‚\
#[fg=#89b4fa,bg=#313244] ó°¥” %H:%M \
#[fg=#cba6f7,bg=#313244]\
#[fg=#1e1e2e,bg=#cba6f7,bold]  #h "

# â”Œâ”€ Windows
setw -g window-status-separator ""

# Window (inactive)
setw -g window-status-format "\
#[fg=#1e1e2e,bg=#313244]\
#[fg=#6c7086,bg=#313244] #I  #W \
#[fg=#313244,bg=#1e1e2e]"

# Window (active)
setw -g window-status-current-format "\
#[fg=#1e1e2e,bg=#89b4fa]\
#[fg=#1e1e2e,bg=#89b4fa,bold] #I  #W \
#[fg=#89b4fa,bg=#1e1e2e]"

# â”Œâ”€ Pane borders
setw -g pane-border-style "fg=#313244"
setw -g pane-active-border-style "fg=#b4befe"

# â”Œâ”€ Messages & Command line
set -g message-style "fg=#1e1e2e,bg=#a6e3a1,bold"
set -g message-command-style "fg=#cdd6f4,bg=#313244"

# â”Œâ”€ Mode (copy mode highlight)
setw -g mode-style "fg=#1e1e2e,bg=#f9e2af,bold"

# â”Œâ”€ Clock
setw -g clock-mode-colour "#89b4fa"
setw -g clock-mode-style 24

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# âš¡  Session management & Quick actions
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# Fuzzy session switcher (requiere fzf)
bind s display-popup -E -w 60% -h 60% "\
  tmux list-sessions -F '#{session_name}' | \
  fzf --reverse --header='Switch Session' \
      --preview='tmux capture-pane -ep -t {}' | \
  xargs tmux switch-client -t"

# Fuzzy window switcher
bind w display-popup -E -w 60% -h 60% "\
  tmux list-windows -a -F '#{session_name}:#{window_index} #{window_name}' | \
  fzf --reverse --header='Switch Window' | \
  cut -d' ' -f1 | \
  xargs tmux switch-client -t"

# Quick scratchpad popup (toggle terminal)
bind -n M-t display-popup -E -w 80% -h 80% -d "#{pane_current_path}"

# Quick htop popup
bind -n M-h display-popup -E -w 80% -h 80% "htop"

# Lazygit popup (si lo tienes instalado)
bind g display-popup -E -w 90% -h 90% -d "#{pane_current_path}" "lazygit"

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ğŸ”„  Reload
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
bind r source-file ~/.tmux.conf \; display " Config Reloaded!"

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ğŸ”Œ  Plugins (TPM)
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

# ğŸ” tmux-fzf: fuzzy finder para todo (sessions, windows, panes, commands)
set -g @plugin 'sainnhe/tmux-fzf'
set -g @tmux-fzf-launch-key 'f'

# ğŸ’¾ tmux-resurrect: guarda y restaura sesiones despuÃ©s de reboot
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @resurrect-capture-pane-contents 'on'
set -g @resurrect-strategy-nvim 'session'            # Restaura sesiones de nvim

# ğŸ”„ tmux-continuum: auto-save de sesiones cada 15 min
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @continuum-restore 'on'
set -g @continuum-save-interval '15'

# ğŸ“ tmux-yank: mejor clipboard integration
set -g @plugin 'tmux-plugins/tmux-yank'

# ğŸ§­ vim-tmux-navigator: Ctrl+hjkl seamless entre nvim y tmux
set -g @plugin 'christoomey/vim-tmux-navigator'

# ğŸ‘† tmux-thumbs: quick copy de URLs, hashes, paths (like vimium)
set -g @plugin 'fcsonline/tmux-thumbs'
set -g @thumbs-key T
set -g @thumbs-alphabet qwerty
set -g @thumbs-command 'echo -n {} | clip.exe'       # Cambia clip.exe por pbcopy en mac

# ğŸ” tmux-fzf-url: abre URLs del terminal con fzf
set -g @plugin 'wfxr/tmux-fzf-url'
set -g @fzf-url-bind 'u'

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ğŸš€  Initialize TPM (keep this at the very bottom)
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
run '~/.tmux/plugins/tpm/tpm'
